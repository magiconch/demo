## 用户场景假设

假设我们正在进行一个商城业务，我们后台的人员分为普通员工和老板。

普通员工的权限有

- 修改商品信息
- 修改商品价格


而老板可以添加新的商品

- 修改商品信息
- 修改商品价格
- 上架新商品

## 单一端口

### 登录部分

首先我们登录完成之后需要拿到cookie，将cookie保存起来。

```js

document.cookie = my_cookie;

```

这时我们需要获取到的是用户的权限码，这里可以仿照linux的权限系统，用一个前后端约定的数来的方式定义各个功能的权限, 比如

----
可修改商品信息 + 可修改商品价格 + 可上架新商品 = 111
可修改商品信息 + 可修改商品价格 + 不上架新商品 = 110

----

前端在获取到他的权限数之后，需要对其做出一系列的权限限制。

以本例来说，如果后续存在只有`修改商品信息`权限的员工，前端的可扩充性会大大提升。

### 前端按钮权限

这里以vue为例，可以用v-if来指定该按钮是否可见。（还可以考虑在按钮上增加不可选样式）

```html
<button v-if="mypermission"/>

data () {
        return {
            mypermission: true
        }
    }


```

```js
data () {
        return {
            mypermission: true
        }
    }

mounted () {
        
        
        this.updatePermission(); // 设置当前的权限内容
    }

methods: {
    updatePermission() {
        this.mypermission = vuex.state.permission;
    }

}

```

这里的权限数据建议保存在vuex中，每次从vuex中获取。

但是这只是对页面的简单美化，实际上我们无法完全禁止用户向后台提交不符合自己权限的指令。

**所以这里需要后端在接收到请求之后，一定要进行校验.**

### 前端路由权限

在相同页面下，我们可以通过按钮来限制用户的权限。

而有些页面我们也需要设置不同的权限。

这时就需要我们在使用vue-router前进行一次简单的权限判断。

```js
if (this.mypermission) {
    this.$router.push('/myPage')
}

```

这里会涉及到一个用户直接用url访问没有权限的页面的问题，

如果需要解决，需要在normal router 之外添加一个动态的 async Routers

## 方法二

对于不同的权限，开放不同的端口。


